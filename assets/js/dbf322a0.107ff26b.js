"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[172],{2518:function(e,t,n){n.d(t,{M:function(){return i}});var r=n(7294);function i(e){var t=e.children;return r.createElement("h2",{className:"sectionHeader"},t)}},1793:function(e,t,n){n.r(t),n.d(t,{default:function(){return pe}});var r=n(7294),i=n(3832),a=n(3066),l=n(3727),c=1,o=2,u=(0,r.createContext)();function s(e){var t=e.children,n=(0,r.useState)(c),i=n[0],a=n[1];return r.createElement(u.Provider,{value:[i,a]},t)}function p(){return(0,r.useContext)(u)}var d=(0,r.createContext)(),m={pointer:"",verifier:"",plaintext:"",exclusiveContent:""};function f(e){var t=e.children,n=(0,r.useState)(m),i=n[0],a=n[1];return r.createElement(d.Provider,{value:[i,a]},t)}function v(){return(0,r.useContext)(d)}var h=n(2518);function E(){return r.createElement(r.Fragment,null,r.createElement("p",null,"In order to generate exclusive content, we need the following information:"))}var y=n(5861),g=n(7757),x=n.n(g),w="https://webmonetization.org/api/exclusive-content",Z="https://webmonetization.org/api/receipts";function C(){return(C=(0,y.Z)(x().mark((function e(t,n,r){var i,a,l,c,o,u,s,p;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n||Z,e.next=3,b(t);case 3:return a=e.sent,l=a.key,c=a.nonce,e.next=8,k(r,i,l);case 8:return o=e.sent,u=o.cypherText,s=o.cypherVerifier,p=o.initVector,e.abrupt("return",{verifier:i,nonce:c,cypherText:u,cypherVerifier:s,initVector:p});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return S.apply(this,arguments)}function S(){return(S=(0,y.Z)(x().mark((function e(t){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(w+"/deriveNewKey",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentPointer:t})});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t,n){return T.apply(this,arguments)}function T(){return(T=(0,y.Z)(x().mark((function e(t,n,r){var i,a,l,c;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(j(r));case 2:return i=e.sent,a=H(),e.next=6,F(A(t),i,A(a));case 6:return l=e.sent,e.next=9,F(A(n),i,A(a));case 9:return c=e.sent,e.abrupt("return",{cypherText:O(l),cypherVerifier:O(c),initVector:a});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return V.apply(this,arguments)}function V(){return(V=(0,y.Z)(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.crypto.subtle.importKey("raw",t,"AES-GCM",!1,["encrypt","decrypt"]));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t,n){return M.apply(this,arguments)}function M(){return(M=(0,y.Z)(x().mark((function e(t,n,r){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},n,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return(new TextEncoder).encode(e)}function O(e){return window.btoa(String.fromCharCode.apply(null,new Uint8Array(e)))}function j(e){for(var t=window.atob(e),n=new ArrayBuffer(t.length),r=new Uint8Array(n),i=0,a=t.length;i<a;i++)r[i]=t.charCodeAt(i);return n}function H(){var e=new Uint8Array(16);return O(crypto.getRandomValues(e))}var J=n(4436),W=n(3700),I=n(8799),P=n(585),z=n(282);function G(){var e=p(),t=(e[0],e[1]),n=v(),i=(n[0],n[1]),a=(0,r.useState)(""),l=a[0],c=a[1],u=(0,r.useState)(""),s=u[0],d=u[1],m=(0,r.useState)(""),f=m[0],h=m[1];return r.createElement(r.Fragment,null,r.createElement(J.Z,{margin:"normal",fullWidth:!0},r.createElement(W.Z,{shrink:"false",htmlFor:"pointer"},"Payment Pointer"),r.createElement(I.Z,{id:"pointer",type:"text",value:l,onChange:function(e){c(e.target.value)}}),r.createElement(P.Z,{id:"pointer-helper-text"},"Example: ",r.createElement("code",null,"$spsp.example.com/alice")," or"," ",r.createElement("code",null,"https://spsp.example.com/alice"))),r.createElement(J.Z,{margin:"normal",fullWidth:!0},r.createElement(W.Z,{shrink:"false",htmlFor:"plaintext"},"Content"),r.createElement(I.Z,{id:"plaintext",multiline:!0,rows:10,value:f,onChange:function(e){h(e.target.value)},style:{borderStyle:"solid solid none solid",borderWidth:"1px",borderColor:"#949494",padding:"8px"}}),r.createElement(P.Z,{id:"pointer-helper-text"},"This can really just be plain text, e.g. ",r.createElement("code",null,"Hello World"),", or an HTML tag, e.g."," ",r.createElement("code",null,"<div><p>Hello World</p></div>"))),r.createElement(J.Z,{margin:"normal",fullWidth:!0},r.createElement(W.Z,{shrink:"false",htmlFor:"verifier"},"Verifier URL (optional)"),r.createElement(I.Z,{id:"verifier",type:"text",value:s,onChange:function(e){d(e.target.value)}}),r.createElement(P.Z,{id:"pointer-helper-text"},"If this is not specified, we will use a hosted verifier. If you decide to use your own verifier, specify something like:"," ",r.createElement("code",null,"https://verifier.example.com"))),r.createElement(z.Z,{variant:"outlined",size:"medium",disabled:!l|!f,onClick:function(){(function(e,t,n){return C.apply(this,arguments)})(l,s,f).then((function(e){i({pointer:l,verifier:e.verifier,plaintext:f,nonce:e.nonce,cypherText:e.cypherText,cypherVerifier:e.cypherVerifier,initVector:e.initVector}),t(o)}))}},"Generate"))}var L=n(2273),U=n(3454),B=n(3173),R=n(6447),D=n(8623),K=n(9525),Y=n(7212),$=n(1395),q=n(8334),Q=n(9956);function X(e){var t=r.useState(!1),n=t[0],i=t[1],a=function(e){var t=document.getElementById(e).innerText;navigator.clipboard.writeText(t).then((function(){i(!0),console.log("copied to clipboard")}),(function(){console.log("copy to clipboard failed")}))};return r.createElement("div",null,r.createElement(R.ZP,{title:e.message},r.createElement(z.Z,{tooltip:!0,onClick:function(){return a(e.id)}},r.createElement(B.Z,null))),r.createElement(D.Z,{open:n,onClose:function(){i(!1)}},r.createElement(K.Z,null,r.createElement(Q.Z,{display:"flex",justifyContent:"center",alignItems:"center"},r.createElement($.Z,{style:{color:q.Z[500],fontSize:50}})),r.createElement(Y.Z,null,"Copied to clipboard!"))))}function _(){var e=v()[0],t=e.verifier.endsWith("/")?e.verifier:e.verifier+"/",n='<div \n  class="exclusive" \n  id='+JSON.stringify(Math.random().toString(36).substr(2).replace(/^[0-9]/g,"aa"))+"\n  paymentpointer="+JSON.stringify(e.pointer)+"\n  proxypaymentpointer="+JSON.stringify(t+encodeURIComponent(e.pointer))+"\n  cyphertext="+JSON.stringify(e.cypherText)+"\n  cypherverifier="+JSON.stringify(e.cypherVerifier)+"\n  initvector="+JSON.stringify(e.initVector)+"\n  nonce="+JSON.stringify(e.nonce)+'\n>\n  <div class="exclusiveMessage" style="text-align: center"></div>\n  <div class="exclusiveContent"></div>\n</div>';return r.createElement(r.Fragment,null,r.createElement("p",null,"Here is what you need to do to embed it on your web page:"),r.createElement("p",null,"1. Add the following ",r.createElement("code",null,"div")," tag to your HTML, in the spot you want the exclusive content to appear."),r.createElement(X,{id:"ec-div",message:"Copy div tag"}),r.createElement(L.Z,{id:"ec-div",language:"htmlbars",style:U.Z},n),r.createElement("p",null,"2. Add"," ",r.createElement("strong",null,"one of the following ",r.createElement("code",null,"script")," tags"," ")," ","to your HTML",r.createElement("code",null,"body"),". You have the choice between embedding a script that depends on an external script and one that doesn't have any dependencies. If you include multiple exclusive content ",r.createElement("code",null,"div")," ","tags, you only need to add the script once."))}var ee=n(3366),te=n(5258),ne=n(65),re=n(1423);function ie(){return r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement(X,{id:"dependentScript",message:"Copy script with dependencies"}),r.createElement(L.Z,{id:"dependentScript",language:"htmlbars",style:U.Z},'<script src="https://webmonetization.org/js/exclusive-content.js"><\/script>')))}function ae(){var e=(0,r.useState)(""),t=e[0],n=e[1];return(0,r.useEffect)((function(){fetch("../../../../static/js/exclusive-content.js").then((function(e){return e.text()})).then((function(e){n("<script>\n"+e+"\n<\/script>")}),(function(e){n(e)}))})),r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement(X,{id:"independentScript",message:"Copy script without dependencies"}),r.createElement(L.Z,{id:"independentScript",language:"htmlbars",style:U.Z},t)))}var le=["children","value","index"];function ce(){var e=r.useState(0),t=e[0],n=e[1];return r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement(te.Z,{position:"static",color:"none",style:{boxShadow:"none"}},r.createElement(ne.Z,{value:t,onChange:function(e,t){n(t)},indicatorColor:"primary",textColor:"primary"},r.createElement(re.Z,{label:"Dependencies"}),r.createElement(re.Z,{label:"No Dependencies"}))),r.createElement(oe,{value:t,index:0},r.createElement(ie,null)),r.createElement(oe,{value:t,index:1},r.createElement(ae,null))))}function oe(e){var t=e.children,n=e.value,i=e.index,a=(0,ee.Z)(e,le);return r.createElement("div",a,n===i&&r.createElement(Q.Z,{p:3,style:{padding:"24px 0 24px 0"}},t))}function ue(){var e=p(),t=(e[0],e[1]);return r.createElement(r.Fragment,null,r.createElement(z.Z,{variant:"outlined",size:"medium",onClick:function(){t(c)}},"Back"))}function se(){var e=p()[0];return e===c?r.createElement(r.Fragment,null,r.createElement(h.M,null,"Generate Exclusive Content"),r.createElement(E,null),r.createElement(G,null)):e===o?r.createElement(r.Fragment,null,r.createElement(h.M,null,"Exclusive Content Generated!"),r.createElement(_,null),r.createElement(ce,null),r.createElement(ue,null)):void 0}function pe(e){var t=e.config;return r.createElement(a.Z,{permalink:"/exclusive-content",title:t.title,description:t.tagLine},r.createElement(f,null,r.createElement(s,null,r.createElement("div",{className:"docMainWrapper wrapper"},r.createElement(i.Z,{className:"mainContainer documentContainer metaTagContainer"},r.createElement("header",{className:"postHeader"},r.createElement("h1",null,"Exclusive Content Generator")),r.createElement("p",null,"This tool allows you to create exclusive content which is only unlocked if payment can be verified."," ",r.createElement(l.rU,{to:"/docs/exclusive-content#exclusive-content-with-payment-verification"},"Learn more!")),r.createElement(se,null))))))}}}]);